<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblical Genealogy Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        :root {
            --bg-primary: #f8f9fa;
            --bg-secondary: #ffffff;
            --text-primary: #333333;
            --text-secondary: #6c757d;
            --accent-primary: #5c6bc0;
            --accent-secondary: #3949ab;
            --border-color: #dee2e6;
            --node-fill: #5c6bc0;
            --node-stroke: #3949ab;
            --link-stroke: #9fa8da;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --text-primary: #e6e6e6;
            --text-secondary: #a0a0a0;
            --accent-primary: #7579e7;
            --accent-secondary: #5c62c7;
            --border-color: #374151;
            --node-fill: #7579e7;
            --node-stroke: #5c62c7;
            --link-stroke: #9499e9;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        [data-theme="sepia"] {
            --bg-primary: #f8f0e3;
            --bg-secondary: #f1e5d2;
            --text-primary: #5f4b32;
            --text-secondary: #79654e;
            --accent-primary: #b56b45;
            --accent-secondary: #8f5539;
            --border-color: #d3c6b0;
            --node-fill: #b56b45;
            --node-stroke: #8f5539;
            --link-stroke: #d3a285;
            --shadow: 0 4px 6px rgba(95, 75, 50, 0.1);
        }

        [data-theme="contrast"] {
            --bg-primary: #000000;
            --bg-secondary: #121212;
            --text-primary: #ffffff;
            --text-secondary: #f0f0f0;
            --accent-primary: #ffff00;
            --accent-secondary: #ffd700;
            --border-color: #ffffff;
            --node-fill: #ffff00;
            --node-stroke: #ffd700;
            --link-stroke: #ffffe0;
            --shadow: 0 4px 6px rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            transition: all 0.3s ease;
        }

        #controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        button {
            background-color: var(--accent-primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: var(--accent-secondary);
        }

        #tree-container {
            width: 100%;
            height: calc(100vh - 40px);
            overflow: hidden;
        }

        .node circle {
            fill: var(--node-fill);
            stroke: var(--node-stroke);
            stroke-width: 2px;
        }

        .node text {
            font: 12px sans-serif;
            fill: var(--text-primary);
        }

        .link {
            fill: none;
            stroke: var(--link-stroke);
            stroke-width: 2px;
        }

        .tooltip {
            position: absolute;
            padding: 10px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            pointer-events: none;
            font-size: 14px;
            box-shadow: var(--shadow);
            max-width: 300px;
        }
    </style>
</head>
<body>
    <div id="controls">
        <button onclick="changeTheme('light')">Light</button>
        <button onclick="changeTheme('dark')">Dark</button>
        <button onclick="changeTheme('sepia')">Sepia</button>
        <button onclick="changeTheme('contrast')">High Contrast</button>
        <button onclick="resetZoom()">Reset Zoom</button>
    </div>
    <div id="tree-container"></div>

    <script>
        // Theme switching functionality
        function changeTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
        }

        // Initialize D3 visualization
        const margin = {top: 20, right: 90, bottom: 20, left: 90};
        const width = window.innerWidth - margin.left - margin.right;
        const height = window.innerHeight - margin.top - margin.bottom;

        // Create SVG container
        const svg = d3.select("#tree-container")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // Add zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 3])
            .on("zoom", (event) => {
                svg.attr("transform", event.transform);
            });

        d3.select("#tree-container svg")
            .call(zoom);

        function resetZoom() {
            d3.select("#tree-container svg")
                .transition()
                .duration(750)
                .call(zoom.transform, d3.zoomIdentity);
        }

        // Create tooltip
        const tooltip = d3.select("body")
            .append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);
        // Sample Biblical genealogy data
        const genealogyData = {
            id: "adam",
            name: "Adam",
            birth: "Creation",
            death: "930 years after creation",
            description: "First man created by God",
            references: ["Genesis 1:26-27", "Genesis 2:7", "Genesis 5:5"],
            children: [
                {
                    id: "seth",
                    name: "Seth",
                    birth: "130 years after creation",
                    death: "1042 years after creation",
                    description: "Third son of Adam and Eve, born after Abel's death",
                    references: ["Genesis 4:25", "Genesis 5:3-8"],
                    children: [
                        {
                            id: "enosh",
                            name: "Enosh",
                            birth: "235 years after creation",
                            death: "1140 years after creation",
                            description: "Son of Seth",
                            references: ["Genesis 5:6-11"],
                            children: [
                                {
                                    id: "kenan",
                                    name: "Kenan",
                                    birth: "325 years after creation",
                                    death: "1235 years after creation",
                                    description: "Son of Enosh",
                                    references: ["Genesis 5:9-14"],
                                    children: [
                                        {
                                            id: "mahalalel",
                                            name: "Mahalalel",
                                            birth: "395 years after creation",
                                            death: "1290 years after creation",
                                            description: "Son of Kenan",
                                            references: ["Genesis 5:12-17"],
                                            children: [
                                                {
                                                    id: "jared",
                                                    name: "Jared",
                                                    birth: "460 years after creation",
                                                    death: "1422 years after creation",
                                                    description: "Son of Mahalalel",
                                                    references: ["Genesis 5:15-20"],
                                                    children: [
                                                        {
                                                            id: "enoch",
                                                            name: "Enoch",
                                                            birth: "622 years after creation",
                                                            death: "987 years after creation",
                                                            description: "Son of Jared, walked with God",
                                                            references: ["Genesis 5:18-24"],
                                                            children: [
                                                                {
                                                                    id: "methuselah",
                                                                    name: "Methuselah",
                                                                    birth: "687 years after creation",
                                                                    death: "1656 years after creation",
                                                                    description: "Son of Enoch, lived longest of all recorded in Bible",
                                                                    references: ["Genesis 5:21-27"],
                                                                    children: [
                                                                        {
                                                                            id: "lamech",
                                                                            name: "Lamech",
                                                                            birth: "874 years after creation",
                                                                            death: "1651 years after creation",
                                                                            description: "Son of Methuselah, father of Noah",
                                                                            references: ["Genesis 5:25-31"],
                                                                            children: [
                                                                                {
                                                                                    id: "noah",
                                                                                    name: "Noah",
                                                                                    birth: "1056 years after creation",
                                                                                    death: "2006 years after creation",
                                                                                    description: "Built the ark, survived the flood",
                                                                                    references: ["Genesis 5:29", "Genesis 9:29"],
                                                                                    children: [
                                                                                        {
                                                                                            id: "shem",
                                                                                            name: "Shem",
                                                                                            birth: "1558 years after creation",
                                                                                            death: "2158 years after creation",
                                                                                            description: "Firstborn son of Noah",
                                                                                            references: ["Genesis 5:32", "Genesis 11:10-11"],
                                                                                            children: []
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        };

        // Create tree layout
        const treeLayout = d3.tree().size([height, width]);

        // Configure the tree data
        const root = d3.hierarchy(genealogyData);
        treeLayout(root);

        // Create links
        const links = svg.selectAll(".link")
            .data(root.links())
            .enter()
            .append("path")
            .attr("class", "link")
            .attr("d", d3.linkHorizontal()
                .x(d => d.y)
                .y(d => d.x));

        // Create nodes
        const nodes = svg.selectAll(".node")
            .data(root.descendants())
            .enter()
            .append("g")
            .attr("class", "node")
            .attr("transform", d => `translate(${d.y},${d.x})`)
            .on("mouseover", function(event, d) {
                tooltip.transition()
                    .duration(200)
                    .style("opacity", .9);
                
                // Create tooltip content
                let tooltipContent = `
                    <strong>${d.data.name}</strong><br>
                    ${d.data.birth ? "Birth: " + d.data.birth + "<br>" : ""}
                    ${d.data.death ? "Death: " + d.data.death + "<br>" : ""}
                    ${d.data.description ? "Description: " + d.data.description + "<br>" : ""}
                    ${d.data.references ? "References: " + d.data.references.join(", ") : ""}
                `;
                
                tooltip.html(tooltipContent)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 28) + "px");
            })
            .on("mouseout", function() {
                tooltip.transition()
                    .duration(500)
                    .style("opacity", 0);
            });

        // Add circles to nodes
        nodes.append("circle")
            .attr("r", 6);

        // Add text labels to nodes
        nodes.append("text")
            .attr("dy", ".35em")
            .attr("x", d => d.children ? -12 : 12)
            .style("text-anchor", d => d.children ? "end" : "start")
            .text(d => d.data.name);

        // Function to toggle node expansion
        function toggleNode(d) {
            if (d.children) {
                d._children = d.children;
                d.children = null;
            } else {
                d.children = d._children;
                d._children = null;
            }
            update(d);
        }

        // Initialize with the light theme
        changeTheme("light");
    </script>
</body>
</html>
